import{u as L,_ as z}from"./Avatar.vue_vue_type_script_setup_true_lang-DegEO_oN.js";import{d as y,c as o,o as t,F as b,r as k,a as I,u as r,b as v,e as R,f as N,n as S,w as q,g as l,h as C,t as V,i as D,j as g,T as H,k as E,l as F,m as G,v as P,p as B,q as W,s as M,x as A,R as J,y as O}from"./index-mcQOza9L.js";import{c as U,_ as Q}from"./MatchCard.vue_vue_type_style_index_0_scoped_af1c9d2a_lang-lq0khR1n.js";import{H as X}from"./heart-C8FExVQM.js";/**
 * @license lucide-vue-next v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=U("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=U("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),K={class:"flex justify-around items-center h-16 bg-gray-900 border-t border-gray-700"},ee=y({__name:"MobileTabBar",props:{modelValue:{},items:{}},emits:["update:modelValue","click"],setup(p,{emit:n}){const e=n;function m(i){e("update:modelValue",i),e("click",i)}return(i,c)=>(t(),o("div",K,[(t(!0),o(b,null,k(i.items,d=>(t(),I(r(Q),{key:d.key,icon:d.icon,onClick:s=>m(d.key),buttonClass:["p-2 rounded-full transition bg-transparent",i.modelValue===d.key?"text-blue-500":""].join(" ")},null,8,["icon","onClick","buttonClass"]))),128))]))}}),te={class:"h-full flex flex-col"},se={class:"relative flex border-b border-gray-700"},ae=["onClick"],oe={class:"flex-1 overflow-y-auto scrollbar-hide"},le=y({__name:"TabLayout",props:{tabs:{},modelValue:{}},emits:["update:modelValue"],setup(p,{emit:n}){const e=p,m=n,i=v(0),c=v(0),d=v([]),s=v("right"),u=R(()=>e.tabs.findIndex(h=>h.key===e.modelValue));N(()=>{S(()=>f())}),q(()=>e.modelValue,(h,_)=>{const a=e.tabs.findIndex($=>$.key===_),w=e.tabs.findIndex($=>$.key===h);s.value=w>a?"right":"left"});function x(h){m("update:modelValue",h),S(()=>f())}function f(){const h=e.tabs.findIndex(a=>a.key===e.modelValue),_=d.value[h];if(_){const a=_.getBoundingClientRect(),w=_.parentElement.getBoundingClientRect();i.value=a.left-w.left,c.value=a.width}}const j=h=>s.value==="right"&&u.value===0?"transition-none":h===e.modelValue?s.value==="right"?"translate-x-0 animate-slide-left":"translate-x-0 animate-slide-right":s.value==="right"?"animate-slide-left-out":"animate-slide-right-out";return(h,_)=>(t(),o("div",te,[l("div",se,[(t(!0),o(b,null,k(e.tabs,(a,w)=>(t(),o("button",{key:a.key,class:"flex-1 py-3 text-center relative overflow-hidden rounded-none",onClick:$=>x(a.key)},[l("span",{class:C(e.modelValue===a.key?"text-white font-bold":"text-gray-500")},V(a.label),3)],8,ae))),128)),l("div",{class:"absolute bottom-0 h-1 bg-pink-500 transition-all duration-300",style:D({width:`${100/e.tabs.length}%`,left:`${u.value*100/e.tabs.length}%`})},null,4)]),l("div",oe,[g(H,{tag:"div",class:"relative h-full"},{default:E(()=>[(t(!0),o(b,null,k(e.tabs,a=>F((t(),I(G(a.component),{key:a.key,class:C(["absolute inset-0 h-full transition-transform duration-300",j(a.key)])},null,8,["class"])),[[P,a.key===e.modelValue]])),128))]),_:1})])]))}}),ne={class:"p-4 space-y-2"},ie=["onClick"],re={class:"flex-1"},ce={class:"flex items-center space-x-1"},de={class:"text-white font-bold"},ue={key:0,class:"text-gray-400 text-sm truncate"},T=y({__name:"MessageList",setup(p){const n=B(),{goChat:e}=L(),m=W(),i=R(()=>m.params.userId);return(c,d)=>(t(),o("div",ne,[(t(!0),o(b,null,k(r(n).sortedUserList,s=>{var u;return t(),o("div",{key:s.name,class:C(["flex items-center space-x-4 cursor-pointer hover:bg-gray-800 p-2 rounded",{"bg-gray-700":i.value===s.id}]),onClick:x=>r(e)(s.id)},[g(r(z),{src:s.avatar},null,8,["src"]),l("div",re,[l("div",ce,[l("span",de,V(s.name),1),s.isVerified?(t(),I(r(Z),{key:0,class:"w-4 h-4 text-blue-500 fill-blue-500","stroke-width":1.5})):M("",!0)]),(u=s.messages)!=null&&u.length?(t(),o("p",ue,V(s.messages[s.messages.length-1].text),1)):M("",!0)])],10,ie)}),128))]))}}),he={class:"p-2 grid gap-4 grid-cols-[repeat(auto-fit,minmax(120px,1fr))] justify-items-center items-start"},me=["onClick"],fe=["src"],_e={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-2 text-white text-sm font-semibold rounded"},pe={key:0,class:"absolute top-1 right-1 w-3 h-3 bg-pink-500 rounded-full"},ve=y({__name:"MatchedList",setup(p){const n=B(),{goChat:e}=L();return(m,i)=>(t(),o("div",null,[l("div",he,[(t(!0),o(b,null,k(r(n).matchedUsers,c=>(t(),o("div",{key:c.id,onClick:d=>r(e)(c.id),class:"relative w-full aspect-[3/4] rounded bg-gray-700 cursor-pointer overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-lg"},[l("img",{src:c.avatar,alt:"avatar",class:"w-full h-full object-cover rounded transition-opacity duration-300 hover:opacity-80"},null,8,fe),l("div",_e,V(c.name),1),c.hasNewMessage?(t(),o("div",pe)):M("",!0)],8,me))),128))])]))}}),ge={class:"flex h-full bg-black"},be={class:"flex-[3] h-full w-[400px] bg-gray-900 text-white hidden md:block"},ke={class:"flex-[7] flex flex-col h-full"},ye={class:"flex-1 overflow-hidden"},xe={key:0,class:"h-full w-full md:hidden overflow-y-auto scrollbar-hide"},we={class:"md:hidden"},Ie=y({__name:"MatchChatView",setup(p){const n=v("match"),{goMatches:e}=L(),m=A(),i=R(()=>m.currentRoute.value.path===J.MatchChatLayout),c=[{key:"match",label:"配對",component:ve},{key:"chat",label:"聊天",component:T}];function d(s){i.value||e()}return(s,u)=>{const x=O("router-view");return t(),o("div",ge,[l("div",be,[g(r(le),{tabs:c,modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=f=>n.value=f)},null,8,["modelValue"])]),l("div",ke,[l("div",ye,[l("div",{class:C(["h-full w-full",{"hidden md:block":n.value==="chat"&&i.value}])},[(t(),I(x,{key:s.$route.path}))],2),n.value==="chat"&&i.value?(t(),o("div",xe,[g(r(T))])):M("",!0)]),l("div",we,[g(r(ee),{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=f=>n.value=f),items:[{icon:r(X),key:"match"},{icon:r(Y),key:"chat"}],onClick:d},null,8,["modelValue","items"])])])])}}});export{Ie as default};
