import{d as B,b as d,p as j,e as M,w as S,c as n,g as e,j as u,u as a,F as g,r as I,t as m,l as T,A as E,B as F,a as N,s as U,h,o,n as V}from"./index-mcQOza9L.js";import{u as $,_ as A}from"./Avatar.vue_vue_type_script_setup_true_lang-DegEO_oN.js";import{c as D,_ as H,P as K}from"./MatchCard.vue_vue_type_style_index_0_scoped_af1c9d2a_lang-lq0khR1n.js";import{X as L}from"./x-yikAkmpX.js";/**
 * @license lucide-vue-next v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=D("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),z={class:"flex flex-col h-full w-full bg-black relative"},X={class:"bg-gray-800 text-white px-3 py-1 rounded-xl max-w-[70%] rounded-bl-md"},q={key:1,class:"bg-blue-500 text-white px-3 py-1 rounded-xl max-w-[70%] rounded-br-md"},G={class:"w-full flex justify-center mb-4"},J={class:"text-gray-400 text-sm"},O={class:"border-t border-gray-700 p-4 flex items-center space-x-4"},Q={class:"relative"},R=["disabled"],se=B({__name:"MessageContent",props:{userId:{}},setup(b){const s=d(""),p=b,i=d(!1),{goMatches:v}=$(),f=j(),c=f.getUserById(p.userId),_=M(()=>[...c.messages].reverse());function w(y){s.value+=y.i,i.value=!1}const x=()=>{s.value&&(f.addMessageAndUpdateTimestamp(p.userId,s.value,!0),s.value="")},r=d(null),k=()=>{V(()=>{setTimeout(()=>{r.value&&(r.value.scrollTop=r.value.scrollHeight-r.value.clientHeight)},100)})};return S(c.messages,()=>{k()}),(y,l)=>(o(),n("div",z,[e("button",{onClick:l[0]||(l[0]=(...t)=>a(v)&&a(v)(...t)),class:"absolute top-2 right-2 text-white hover:text-red-500 p-1"},[u(a(L),{class:"w-6 h-6"})]),e("div",{ref_key:"chatContainer",ref:r,class:"flex flex-col-reverse overflow-y-auto h-full scrollbar-hide p-4"},[l[3]||(l[3]=e("div",{class:"flex-1"},null,-1)),(o(!0),n(g,null,I(_.value,(t,C)=>(o(),n("div",{key:C,class:h(["flex items-start space-x-2 p-2",t.isSelf?"justify-end":"justify-start"])},[t.isSelf?(o(),n("div",q,m(t.text),1)):(o(),n(g,{key:0},[u(a(A),{src:a(c).avatar,width:"w-10"},null,8,["src"]),e("div",X,m(t.text),1)],64))],2))),128)),e("div",G,[e("div",J," 您與 "+m(a(c).name)+" 已成為好友 ",1)])],512),e("div",O,[T(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>s.value=t),type:"text",placeholder:"輸入訊息",class:"flex-1 bg-transparent text-white focus:outline-none",id:"messageInput",name:"message",onKeydown:F(x,["enter"])},null,544),[[E,s.value]]),e("div",Q,[u(a(H),{icon:a(P),onClick:l[2]||(l[2]=t=>i.value=!i.value),buttonClass:"bg-transparent"},null,8,["icon"]),i.value?(o(),N(a(K),{key:0,theme:"dark",onSelect:w,class:"absolute bottom-full right-0 mb-2"})):U("",!0)]),e("button",{disabled:!s.value,onClick:x,class:h({"text-white px-3 py-1 rounded disabled:cursor-not-allowed":!0,"bg-gradient-to-r from-[#FE2B75] to-[#FE4754]":s.value,"bg-gray-700":!s.value})}," 傳送 ",10,R)])]))}});export{se as default};
